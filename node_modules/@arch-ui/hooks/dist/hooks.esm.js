import _slicedToArray from '@babel/runtime/helpers/esm/slicedToArray';
import ResizeObserver from 'resize-observer-polyfill';
import { useState, useLayoutEffect } from 'react';

function useMeasure(ref) {
  let _useState = useState(() => ({
    height: 0,
    width: 0
  })),
      _useState2 = _slicedToArray(_useState, 2),
      snapshot = _useState2[0],
      setSnapshot = _useState2[1];

  useLayoutEffect(() => {
    let element = ref.current;

    if (element !== null) {
      let resizeObserver = new ResizeObserver((_ref) => {
        let _ref2 = _slicedToArray(_ref, 1),
            entry = _ref2[0];

        const height = entry.target.offsetHeight;
        const width = entry.target.offsetWidth;

        if (width !== snapshot.width || height !== snapshot.height) {
          setSnapshot({
            width,
            height
          });
        }
      });
      resizeObserver.observe(element);
      return () => {
        resizeObserver.unobserve(element);
      };
    }
  });
  return snapshot;
}

export { useMeasure };
